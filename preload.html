<!DOCTYPE html>

<html>
<head>
    <title>Preload</title>
    <style>
        #perahu{
                float: left;
        }
        #moveShip{
				position: relative;
                float: left;
                left:40px;
                width: 20px;
                height: 100px;
        }
		#boat{
				position: relative;
                float: left;
				top: 300px;
				left: 100px;
                width: 100px;
                height: 100px;
        }
		body{
			background: blue;
		}
</style>
    <script src="js/jquery.js"></script>
    <script>
        var numLoad=0;
        var image = new Array();
        var list = new Array();
        var x=100;
        list = [
                'media/image/bg/bus.png',
				'media/image/bg/bus.png',
				'media/image/bg/bus.png',
				'media/image/bg/bus.png',
				'media/image/bg/bus.png'
                /*
                'img/1.jpg',
                'img/2.jpg',
                'img/3.jpg',
                'img/4.jpg',
                'img/5.jpg',
                'img/6.jpg',
                'img/7.jpg',
                'img/8.jpg',
                'img/9.jpg',
                'img/10.jpg',
                'img/11.jpg'
                */
                ];
        
        function handleOnload(){
            numLoad++;
            console.log(image[numLoad-1].src + ' has been Loaded...')
            x=150*(numLoad+1);
            $("#perahu").stop().animate({ width:x },3500);
            $("#moveShip").html(numLoad + "/" + list.length);
            if(numLoad==list.length){
                console.log("Finished")
            }
        }
       
       $(document).ready( function (){
            $("#perahu").stop().animate({ width:x },3500);
            $("#moveShip").html('0/' + list.length);
            $.get( 
                'test.php', 
                function( data ){ 
                    //console.log(data); // ["test.jpg"]
                    for(var i=0;i<list.length;i++){
                        image[i] =  new Image();
                        image[i].src = list[i];
                        $(image[i]).load( function(){ 
                            handleOnload();
                        });
                    }
                } 
            ); 
		setInterval(function () {  
			if($('#perahu').css('width')=='900px'){
				window.location.href = "/play";
			}
        }, 1000);
        });  
    </script>
</head>

<body>
<div id=perahu>&nbsp;</div>
<div id=boat>
<img src=media/image/sailboat2.png width=100px height=100px />
<div id=moveShip></div>
</div>

</body>
</html>
